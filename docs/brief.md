# Project Brief: Mermaid-Render

## 執行摘要

**Mermaid-Render** 是一個AI驅動的高客製化圖表展示平台，專門解決現有 Mermaid 渲染器的根本性問題：語法容錯差、PNG匯出截斷、複雜關聯線混亂、缺乏互動展示功能。

**核心價值定位**：「Mermaid 的終極渲染解決方案」- 提供無錯誤的渲染體驗、完美的圖片匯出、革命性的序列展示功能。

**目標市場**：技術文件撰寫者、專案經理、系統分析師 - 任何需要製作複雜圖表的使用者。

**獨特價值**：業界首創的編號序列展示功能（區域→節點→關聯線），解決10條線交錯時的視覺混亂問題。

---

## 問題陳述

### 當前痛點

**現有 Mermaid 工具存在致命缺陷：**

1. **語法容錯性極差** - Notion、GitHub 等平台頻繁報錯，版本相容性問題嚴重
2. **PNG匯出截斷** - 複雜圖表匯出時經常被切斷，無法用於正式文件
3. **複雜關聯線視覺混亂** - 10條以上關聯線交錯時，使用者無法快速識別連接關係
4. **缺乏互動展示** - 靜態顯示無法滿足演示和教學需求
5. **無編號管理** - AI生成的帶編號Mermaid程式碼無法依序展示

### 影響程度

- **開發者困擾度**：90%+ 的技術文件作者都遇過 Mermaid 渲染問題
- **效率損失**：平均花費30%額外時間處理圖表渲染問題
- **使用場景限制**：複雜系統架構圖幾乎無法有效展示

### 現有解決方案不足

- **Mermaid Live Editor**：官方工具仍有 PNG 截斷、複雜圖表渲染問題
- **GitHub/GitLab內建**：錯誤處理最差，新語法支援延遲
- **第三方工具**：功能割裂，無法提供完整解決方案

---

## 解決方案

### 核心概念

**三層解決架構：**

1. **渲染層**：多佈局引擎（Cytoscape.js + ELK.js）提供完美渲染
2. **互動層**：序列展示、關聯線追蹤、編號導航
3. **智能層**：錯誤容錯、自動優化、AI增強（未來）

### 關鍵差異化功能

#### 🎯 **MVP核心功能**

- **錯誤容錯系統**：智能語法修復，99%相容性
- **完美PNG匯出**：無截斷、高解析度、自適應大小
- **複雜關聯線優化**：智能佈局演算法，避免交錯
- **序列展示功能**：區域→節點→關聯線按編號依序展示

#### 🚀 **未來規劃功能（Phase 2-3）**

- **多圖表類型支援**：心智圖、流程圖、關聯圖
- **XMind生態整合**：XMind Markdown格式兼容導入
- **AI圖表生成**：自然語言轉圖表、智能擴展編輯
- **子圖表系統**：節點雙擊展開子圖表，支援深度導航
- **跨格式導入**：支援多種圖表工具格式快速轉換

### 為什麼會成功

- **真實痛點**：解決所有使用者都遇到的實際問題
- **技術可行**：基於成熟開源技術，風險可控
- **巨大市場**：Mermaid 使用者群體龐大且成長快速
- **無直接競爭者**：現有工具都有相同問題，我們是第一個系統化解決

---

## 目標使用者

### 主要使用者：技術文件撰寫者

- **特徵**：開發者、技術寫手、DevOps工程師
- **痛點**：需要製作複雜系統架構圖，經常遇到Mermaid渲染問題
- **目標**：快速產出高品質技術文件，減少圖表製作時間
- **行為**：習慣使用Markdown工作流，偏好程式碼化圖表工具

### 次要使用者：專案經理 & 系統分析師

- **特徵**：需要視覺化複雜業務流程和專案依賴關係
- **痛點**：現有工具無法處理大型複雜圖表，展示效果差
- **目標**：清晰展示專案結構，提升溝通效率
- **需求**：互動展示功能，支援演示和培訓場景

---

## 目標與成功指標

### 商業目標

- **市場滲透**：3個月內獲得1000+活躍使用者
- **使用者留存**：30天留存率 > 60%
- **問題解決**：PNG匯出成功率 > 99%，渲染錯誤率 < 1%

### 使用者成功指標

- **學習曲線**：新使用者5分鐘內能成功渲染複雜圖表
- **效率提升**：圖表製作時間減少80%
- **滿意度**：使用者滿意度 > 90%

### 關鍵績效指標

- **技術指標**：支援1000+節點圖表，渲染延遲 < 500ms，60fps動畫
- **產品指標**：每日活躍用戶增長率、功能使用率、匯出成功率
- **商業指標**：使用者推薦率（NPS）、免費轉付費轉換率

---

## MVP範圍

### 核心功能（必須有）

- **智能Mermaid渲染引擎**：錯誤容錯、多佈局支援、自適應節點
- **完美圖片匯出**：PNG/SVG無截斷匯出、高解析度支援
- **序列展示系統**：編號導航、區域/節點/關聯線分離展示
- **複雜關聯線優化**：智能佈局演算法、視覺化優化
- **基礎Web介面**：程式碼編輯器、即時預覽、匯出功能

### MVP外範圍

- AI自動生成功能（Phase 2）
- 心智圖/流程圖支援（Phase 2）
- XMind整合（Phase 2）
- 子圖表系統（Phase 3）
- 協作功能（Phase 3）
- 行動端APP（Phase 3）

### MVP成功標準

- **核心功能**：所有Mermaid語法100%支援，PNG匯出無截斷
- **效能指標**：500節點圖表流暢渲染，匯出時間 < 5秒
- **使用者體驗**：新使用者能在5分鐘內成功使用所有核心功能

---

## 未來願景

### Phase 2功能（3-6個月）

**多圖表生態建立**

- **心智圖支援**：支援樹狀、放射狀心智圖渲染
- **流程圖增強**：更多圖形類型、自定義樣式
- **關聯圖功能**：網狀關係圖、社群圖譜支援
- **XMind整合**：
  - XMind Markdown格式兼容導入
  - XMind檔案直接解析轉換
  - 雙向同步功能

### Phase 3功能（6-12個月）

**AI驅動智能圖表**

- **自然語言轉圖**：「畫一個用戶註冊流程圖」→自動生成
- **智能圖表編輯**：AI建議佈局優化、自動標籤生成
- **圖表擴展**：AI根據上下文自動添加相關節點
- **子圖表系統**：
  - 節點雙擊展開子圖表
  - 多層級圖表導航
  - 麵包屑導航系統
  - 跨圖表關聯追蹤

### 長期願景（1-2年）

**成為圖表視覺化領域的標準工具**

- 支援所有主流圖表類型
- AI助手完全整合工作流
- 企業級協作與分享功能
- 多平台生態整合（Notion、Confluence、GitHub等）

---

## 技術考量

### 平台需求

- **目標平台**：Web優先，未來支援桌面端
- **瀏覽器支援**：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **效能需求**：1000+節點圖表流暢渲染，60fps動畫，500ms載入時間

### 技術架構偏好

- **前端**：Next.js 14 + TypeScript + Tailwind CSS
  - 圖形渲染：Cytoscape.js + ELK.js
  - 動畫：Framer Motion
  - UI元件：Radix UI
  - 狀態管理：Zustand
- **後端**：Node.js + Fastify + Prisma ORM
  - 資料庫：PostgreSQL
  - 快取：Redis
  - AI服務：OpenAI API + LangChain（未來）
- **基礎設施**：Vercel部署、CloudFlare CDN

### 架構考量

- **儲存庫結構**：Monorepo，前後端分離但統一管理
- **服務架構**：微服務架構，核心渲染引擎獨立
- **整合需求**：REST API設計，支援第三方平台嵌入
- **安全性**：使用者隔離、程式碼沙盒執行、XSS防護

---

## 限制與假設

### 限制條件

- **預算**：個人專案，成本控制優先
- **時程**：MVP 4週開發週期，快速驗證
- **資源**：單人開發，重點在核心功能
- **技術**：使用開源技術棧，避免昂貴授權

### 關鍵假設

- 市場對高品質Mermaid渲染有強烈需求
- 使用者願意遷移至新工具以獲得更好體驗
- Cytoscape.js + ELK.js整合能達到預期效果
- 序列展示功能確實能解決複雜圖表展示問題

---

## 風險與待解問題

### 主要風險

- **技術風險**：Cytoscape.js與ELK.js整合複雜度可能高於預期
- **市場風險**：Mermaid官方可能推出類似功能
- **使用者採用風險**：使用者習慣現有工具，轉換成本
- **效能風險**：超大圖表可能遇到瀏覽器效能限制

### 待解問題

- ELK.js在瀏覽器環境的效能表現如何？
- 如何處理超過2000節點的巨型圖表？
- 序列展示動畫如何平衡美觀與效能？
- PNG匯出如何在不同解析度下保持品質？

### 需要進一步研究

- 競爭對手技術架構深度分析
- 目標使用者詳細訪談
- 技術可行性驗證（POC開發）
- 商業模式驗證

---

## 下一步行動

### 立即行動

1. **技術可行性驗證** - 建立 Cytoscape.js + ELK.js 整合POC
2. **核心渲染引擎開發** - 實作錯誤容錯與佈局優化
3. **PNG匯出功能實作** - 解決截斷問題的技術方案
4. **序列展示原型** - 驗證互動展示概念

### PM交接說明

**專案背景**：這個Project Brief提供了Mermaid-Render的完整脈絡，包含市場分析、競爭對手研究、技術考量。

**重點關注**：

- 近期專注MVP核心功能（Mermaid渲染問題）
- 未來規劃已納入心智圖、XMind整合、AI功能、子圖表系統
- 序列展示功能是關鍵差異化優勢
- Phase 2/3功能為戰略規劃，需要在PRD中適當規劃

**PM任務**：請以「PRD生成模式」開始，仔細審閱此Brief，與使用者協作建立詳細的產品需求文件，確保未來規劃功能在設計時預留技術架構空間。

---

## 📋 分析文件索引

### 已完成文件

- ✅ **專案簡報 (Brief)**：`docs/brief.md` - 包含完整未來規劃
- ✅ **競爭對手分析**：`docs/competitor-analysis.md` - 詳細市場分析
- ✅ **產品需求文件(PRD)**：`docs/prd.md` - 技術規格文件

### 附加參考

- 📚 **架構文件**：`docs/architecture/` - 技術標準與架構設計
- 📋 **開發標準**：`docs/standards/` - 專案統一規範

---

_Brief建立時間：2025-01-31_  
_下次更新建議：PRD完成後或重大需求變更時_
